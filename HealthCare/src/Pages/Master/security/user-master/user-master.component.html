<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> 
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<div class="container mt-3">
  <div class="row" [formGroup]="userForm">
    <div class="col-md-2">
      <label>User Status</label>
      <select class="form-control"  formControlName="ddlUserStatus">
        <option value="">~Please Choose~</option>
        <option value="Active">Active</option>
        <option value="InActive">InActive</option>
     </select>
    </div>
    <div  class="col-md-3">
      <label>User Type</label>
      <select class="form-control" id="roleType"  formControlName="ddlUserType">
        <option value="">~Please Choose~</option>
        <option *ngFor="let item of userTypeResponse" [value]="item.roleType">{{item.roleType}}</option>
     </select>
    </div>
    <div  class="col-md-3">
      <label>User Email</label>
      <input class="form-control" type="email" name="email" placeholder="Search by email" formControlName="email">
    </div>
  <div class="col-md-4">
      <div class="div-button">
        <button mat-flat-button class="search-button" (click)="onSearch()" ><mat-icon>search</mat-icon>Search User</button>
        <button mat-flat-button class="add-button" (click)="OpenAddUserPopUp()">
          <mat-icon>add</mat-icon> Add New User</button> 
      </div>
  </div>
  </div>  
  <br/>
  <div class="row" [formGroup]="searchForm">
  <div class="col-md-3"></div>
  <div class="col-md-3"></div>
  <div class="col-md-3"></div>
  <div class="col-md-3">
    <div class="form-group">
      <input class="form-control" formControlName="filterTerm" placeholder="Search..." />
    </div>
  </div>
  </div> 
  <br/>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Sr.No.</th>
        <th (click)="sortTable('fullName')">Name
          <span *ngIf="sortColumn === 'fullName'">
            <i class="bi bi-caret-up" *ngIf="sortDirection === 'asc'"></i>
            <i class="bi bi-caret-down" *ngIf="sortDirection === 'desc'"></i>
          </span>
        </th>
        <th (click)="sortTable('email')">Email
          <span *ngIf="sortColumn === 'email'">
            <i class="bi bi-caret-up" *ngIf="sortDirection === 'asc'"></i>
            <i class="bi bi-caret-down" *ngIf="sortDirection === 'desc'"></i>
          </span>
        </th>
        <th (click)="sortTable('mobileNumber')">Mobile Number
          <span *ngIf="sortColumn === 'mobileNumber'">
            <i class="bi bi-caret-up" *ngIf="sortDirection === 'asc'"></i>
            <i class="bi bi-caret-down" *ngIf="sortDirection === 'desc'"></i>
          </span>
        </th>
        <th (click)="sortTable('roleType')">User Type
          <span *ngIf="sortColumn === 'roleType'">
            <i class="bi bi-caret-up" *ngIf="sortDirection === 'asc'"></i>
            <i class="bi bi-caret-down" *ngIf="sortDirection === 'desc'"></i>
          </span>
        </th>
        <th (click)="sortTable('roleName')">Role Assigned
          <span *ngIf="sortColumn === 'roleName'">
            <i class="bi bi-caret-up" *ngIf="sortDirection === 'asc'"></i>
            <i class="bi bi-caret-down" *ngIf="sortDirection === 'desc'"></i>
          </span>
        </th>
        <th (click)="sortTable('userStatus')">User Status
          <span *ngIf="sortColumn === 'userStatus'">
            <i class="bi bi-caret-up" *ngIf="sortDirection === 'asc'"></i>
            <i class="bi bi-caret-down" *ngIf="sortDirection === 'desc'"></i>
          </span>
        </th>
        <th (click)="sortTable('partnerId')">PartnerId
          <span *ngIf="sortColumn === 'partnerId'">
            <i class="bi bi-caret-up" *ngIf="sortDirection === 'asc'"></i>
            <i class="bi bi-caret-down" *ngIf="sortDirection === 'desc'"></i>
          </span>
        </th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of users | paginate: { itemsPerPage: itemsPerPage, currentPage: p }; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ item.fullName }}</td>
        <td>{{ item.email }}</td>
        <td>{{ item.mobileNumber }}</td>
        <td>{{ item.roleType }}</td>
        <td>{{ item.roleName }}</td>
        <td>{{ item.userStatus }}</td>
        <td>{{ item.partnerId }}</td>
        <td>  
          <button class="edit-button" matTooltip="edit user" (click)="ViewUsers(item.userId)">
          <mat-icon class="edit-icon">edit</mat-icon>
        </button>
        <button class="delete-button" matTooltip="delete user" (click)="openConfirmationDialog(item.userId)">
          <mat-icon class="delete-icon">delete</mat-icon>
        </button>
      </td>
      </tr>
    </tbody>
  </table> 
  <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>
<app-loader *ngIf="loading$ | async"></app-loader>
 